require 'json'

automate_git :actions => [:commit]

read_version do
  doc = JSON.load File.read('./src/manifest.json')
  doc['version']
end

write_version do |currentVersion, nextVersion|
  doc = JSON.load File.read './src/manifest.json'
  doc['version'] = nextVersion.to_s
  File.open('./src/manifest.json', 'w') {|f| f.write JSON.pretty_generate(doc) }
end
